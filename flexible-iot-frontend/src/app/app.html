<div class="app-layout">

  <mat-toolbar color="primary" class="main-toolbar">
    <!-- Opcionális LOGO vagy Cím -->
    <div class="app-logo-text">FlexibleIoT</div>

    <!-- MENÜPONTOK (Bal oldalt, a logo után) -->
    <nav class="nav-links">
      @for (item of navItems; track item.path) {
        <a mat-button
           [routerLink]="item.path"
           routerLinkActive="active-link"
           [routerLinkActiveOptions]="{exact: item.path === '/'}">
          <mat-icon>{{ item.icon }}</mat-icon>
          <span class="nav-label">{{ item.label }}</span>
        </a>
      }
    </nav>

    <!-- SPACER: Ez tolja a jobb oldalra a login részt -->
    <span class="spacer"></span>

    <!-- JOBB OLDAL: User Info & Login (Változatlan a kérésed alapján) -->
    @if (isLoggedIn()) {
      <div class="user-info">
        <mat-icon>account_circle</mat-icon>

        <span class="user-text">
          Hello, <strong>{{ authService.userName() }}</strong>
        </span>

        @let roles = authService.userRoles();
        @if (roles.length > 0) {
          <span class="role-chip">{{ roles[0] }}</span>
        }
      </div>

      <button mat-button (click)="logout()">
        <mat-icon>logout</mat-icon> Log Out
      </button>
    } @else {
      <a mat-button routerLink="/login">
        <mat-icon>login</mat-icon> Login
      </a>
    }
  </mat-toolbar>

  <!-- TARTALOM -->
  <main class="app-content">
    <router-outlet></router-outlet>
  </main>

</div>
