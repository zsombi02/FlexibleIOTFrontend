<section class="dashboard-grid">

  <div class="left-column">
    @for (card of statCards(); track card.id) {
      <mat-card class="stat-card">
        <mat-card-title>{{ card.title }}</mat-card-title>
        <mat-card-content>
          <div class="stat-value">{{ card.value }}</div>
          <div class="stat-subtitle">{{ card.subtitle }}</div>
        </mat-card-content>
      </mat-card>
    }
  </div>

  <div class="center-column">
    @let chart = telemetryCard();
    @if (chart) {
      <mat-card class="telemetry-card">
        <mat-card-title>{{ chart.title }}</mat-card-title>

        <mat-card-content>
          <div class="telemetry-toolbar">
            <div class="metric-selector">
              <span class="metric-label">{{ chart.selectedMetricLabel }}</span>
              <span class="metric-pill">{{ chart.selectedMetricKey }}</span>
            </div>
            <div class="mode-pill">LIVE</div>
          </div>

          <div class="telemetry-big-number">
            {{ chart.placeholderText }}
          </div>
        </mat-card-content>
      </mat-card>
    } @else {
      <mat-card class="telemetry-card">
        <mat-card-content class="empty-state">
          Várakozás adatokra...
        </mat-card-content>
      </mat-card>
    }
  </div>

  <div class="right-column">
    <mat-card class="feed-card">
      <mat-card-title>Élő feed (Szűrt)</mat-card-title>
      <mat-card-content>
        <ul class="feed-list">
          @for (item of liveFeedItems(); track item.id) {
            <li class="feed-item">
              <div class="feed-header">
                <span class="feed-device">{{ item.deviceName }}</span>
                <span class="feed-time">{{ item.time }}</span>
              </div>
              <div class="feed-detail">
                {{ item.metricName }}: <strong>{{ item.value }} {{ item.unit }}</strong>
              </div>
            </li>
          } @empty {
            <li class="feed-item" style="color: gray">Nincs beérkező adat az engedélyezett eszközökről.</li>
          }
        </ul>
      </mat-card-content>
    </mat-card>

  </div>

</section>
